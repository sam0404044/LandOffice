<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>大宗第一類謄本預約申請-申請表格</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <form id="form2" enctype="multipart/form-data">
    <h2>大宗第一類謄本預約申請-申請表格</h2>

    <!-- 身分別：放最前面 -->
    <div class="checkbox-group">
      <label>身分別：</label>
      <label><input type="radio" name="identity" value="申請人" required checked> 申請人</label>
      <label><input type="radio" name="identity" value="代理人"> 代理人</label>
    </div>

    <!-- 姓名 -->
    <label id="labelName" for="name">申請人姓名：</label>
    <input type="text" id="name" name="name" required>

    <!-- 電話 -->
    <label id="labelPhone" for="phone">手機號碼：</label>
    <input type="tel" id="phone" name="phone" required pattern="09\d{8}" inputmode="numeric" maxlength="10" title="請輸入 09 開頭共 10 碼手機號碼">
    <div id="phone-validation" class="phone-validation"></div>

    <!-- 額外欄位：代理人時才顯示 -->
    <div id="applicantBlock" style="display:none;">
      <label for="applicantName">申請人姓名：</label>
      <input type="text" id="applicantName" name="applicantName">
    </div>

    <!-- 檔案 1 -->
    <label for="upload1">地籍謄本及相關資料申請書上傳：</label>
    <input type="file" id="upload1" name="upload1" accept=".pdf,.jpg,.png" required>

    <!-- 檔案 2 -->
    <label id="labelUpload2" for="upload2">申請人身分證明文件上傳：</label>
    <input type="file" id="upload2" name="upload2" accept=".pdf,.jpg,.png" required>

    <div class="info">
      <strong>營業時間：</strong> 星期一～五　08:00–17:00
    </div>

    <!-- 日期時間 -->
    <label for="date">申請日期：</label>
    <input type="date" id="date" name="date" required>

    <label>申請時間：</label>
    <div class="time-options">
      <label><input type="radio" name="time" value="09:00" required><span>09:00</span></label>
      <label><input type="radio" name="time" value="09:30"><span>09:30</span></label>
      <label><input type="radio" name="time" value="10:00"><span>10:00</span></label>
      <label><input type="radio" name="time" value="10:30"><span>10:30</span></label>
      <label><input type="radio" name="time" value="11:00"><span>11:00</span></label>
      <label><input type="radio" name="time" value="13:00"><span>13:00</span></label>
      <label><input type="radio" name="time" value="13:30"><span>13:30</span></label>
      <label><input type="radio" name="time" value="14:00"><span>14:00</span></label>
      <label><input type="radio" name="time" value="14:30"><span>14:30</span></label>
      <label><input type="radio" name="time" value="15:00"><span>15:00</span></label>
      <label><input type="radio" name="time" value="15:30"><span>15:30</span></label>
      <label><input type="radio" name="time" value="16:00"><span>16:00</span></label>
    </div>
    <div id="timeError" class="error-msg"></div>

    <!-- 按鈕 -->
    <button type="submit">提交申請</button>
    <div class="submit-status" aria-live="polite"></div>
  </form>
  <br>

  <footer>
    <div class="footer-info">
      <p>
        Copyright © 2023 桃園市蘆竹地政事務所 版權所有<br>
        地址：338028 桃園市蘆竹區長安路2段236號1、2、3樓<br>
        服務時間：08:00 至 17:00（中午不打烊）<br>
        電話：(03)352-5337(代表號)<br>
        瀏覽器支援：Chrome、Firefox、Edge、Safari 為主，IE 停止支援<br>
        本所意見信箱：
        <a href="mailto:ljland@mail.tyland.gov.tw">ljland@mail.tyland.gov.tw</a>
      </p>
    </div>
  </footer>

  <!-- 控制「申請人 / 代理人」切換 -->
  <script>
    const labelName    = document.getElementById("labelName");
    const labelPhone   = document.getElementById("labelPhone");
    const labelUpload2 = document.getElementById("labelUpload2");
    const applicantBlock = document.getElementById("applicantBlock");
    const applicantInput = document.getElementById("applicantName");

    function applyIdentity(value) {
      if (value === "代理人") {
        // 改標題
        labelName.textContent    = "代理人姓名：";
        labelPhone.textContent   = "代理人連絡電話：";
        labelUpload2.textContent = "申請人身分證明文件上傳：";

        // 顯示並要求填「申請人姓名」
        applicantBlock.style.display = "";
        applicantInput.required = true;
      } else {
        // 還原
        labelName.textContent    = "申請人姓名：";
        labelPhone.textContent   = "連絡電話：";
        labelUpload2.textContent = "申請人身分證明文件上傳：";

        applicantBlock.style.display = "none";
        applicantInput.required = false;
        applicantInput.value = "";
      }
    }

    // 初始狀態
    const checked = document.querySelector("input[name='identity']:checked");
    applyIdentity(checked ? checked.value : "申請人");

    // 綁定 radio
    document.querySelectorAll("input[name='identity']").forEach(el => {
      el.addEventListener("change", (e) => applyIdentity(e.target.value));
    });
  </script>

  <!-- 共用表單送出邏輯 -->
  <script src="script.js"></script>

</body>
</html>
